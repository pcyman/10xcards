---
import Layout from "@/layouts/Layout.astro";
import { AiReviewFlowWrapper } from "@/components/AiReviewFlowWrapper";

export const prerender = false;

const { id: deckId } = Astro.params;

// Validate UUID format
const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
if (!deckId || !uuidRegex.test(deckId)) {
  return Astro.redirect('/decks');
}

// Note: Authentication and deck validation are handled client-side
---

<Layout title="Review Flashcards">
  <AiReviewFlowWrapper client:only="react" deckId={deckId} />
</Layout>
